<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>–ì–†–û–†–•–ò–î ‚Äî –ö–∞—Ç–∞–ª–æ–≥ —Ä–∞—Å—Ç–µ–Ω–∏–π</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root{
      --bg:#0b0d10;
      --card:#12161c;
      --text:#e9eef6;
      --muted:#a9b3c2;
      --accent:#4da3ff;
      --border: rgba(255,255,255,.08);
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius: 18px;
      --chip: rgba(255,255,255,.06);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Arial,sans-serif;
      background: radial-gradient(1200px 900px at 10% -10%, rgba(77,163,255,.22), transparent 55%),
                  radial-gradient(900px 700px at 95% 0%, rgba(35,196,131,.14), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    a{color:inherit}
    .wrap{max-width: 1040px;margin: 0 auto;padding: 18px 16px 140px;}
    header{
      position: sticky; top: 0; z-index: 10;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(11,13,16,.92), rgba(11,13,16,.55));
      border-bottom: 1px solid var(--border);
      padding: 14px 16px;
    }
    .topbar{max-width: 1040px;margin:0 auto;display:flex;gap:12px;align-items:center;justify-content:space-between;}
    .brand{display:flex;flex-direction:column;gap:2px;min-width: 200px;}
    .brand .t{font-weight: 900;letter-spacing:.2px;font-size: 16px;}
    .brand .s{color:var(--muted);font-size: 12px;}
    .controls{flex:1;display:flex;gap:10px;align-items:center;justify-content:flex-end;}
    .search{
      flex:1;max-width: 520px;display:flex;align-items:center;gap:10px;
      background: rgba(255,255,255,.06);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 10px 12px;
    }
    .search input{width:100%;border:0;outline:none;background: transparent;color: var(--text);font-size: 14px;}
    .pill{
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 999px;
      padding: 10px 12px;
      font-size: 13px;
      display:flex;align-items:center;gap:8px;
      cursor:pointer; user-select:none;
    }
    .pill:active{transform: translateY(1px)}
    .pill .badge{
      min-width: 20px;height: 20px;padding: 0 6px;border-radius: 999px;
      background: rgba(77,163,255,.22);
      border: 1px solid rgba(77,163,255,.35);
      display:flex;align-items:center;justify-content:center;
      font-size: 12px;font-weight: 800;
    }

    .tabs{display:flex;gap:10px;margin: 16px 0 10px;}
    .tab{
      border: 1px solid var(--border);
      background: rgba(255,255,255,.05);
      color: var(--text);
      border-radius: 999px;
      padding: 10px 12px;
      font-size: 13px;
      cursor:pointer;
      user-select:none;
    }
    .tab.active{
      background: rgba(77,163,255,.20);
      border-color: rgba(77,163,255,.35);
      font-weight: 800;
    }

    .section-title{display:flex;align-items:flex-end;justify-content:space-between;margin: 10px 0 10px;gap: 12px;}
    .section-title h2{margin:0;font-size: 18px;letter-spacing:.2px;}
    .section-title .hint{margin:0;color: var(--muted);font-size: 12px;line-height: 1.35;text-align:right;max-width: 420px;}

    .grid{display:grid;grid-template-columns: repeat(3, minmax(0, 1fr));gap: 12px;}
    @media (max-width: 880px){.grid{grid-template-columns: repeat(2, minmax(0, 1fr));}.brand{min-width:unset}}
    @media (max-width: 520px){.grid{grid-template-columns: 1fr;}.search{max-width:unset}.section-title{flex-direction:column;align-items:flex-start}.section-title .hint{text-align:left}}

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;flex-direction:column;
      min-height: 260px;
    }
    .thumb{
      height: 118px;
      background:
        radial-gradient(600px 180px at 20% 20%, rgba(77,163,255,.23), transparent 55%),
        radial-gradient(520px 220px at 80% 20%, rgba(35,196,131,.18), transparent 55%),
        linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-bottom: 1px solid var(--border);
      display:flex;align-items:flex-end;
      padding: 12px;gap: 8px;
    }
    .tag{
      font-size: 12px;padding: 6px 10px;border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,.12);
      color: var(--muted);
    }
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--chip);
      color: var(--muted);
    }

    .content{padding: 12px;display:flex;flex-direction:column;gap: 10px;flex: 1;}
    .name{display:flex;flex-direction:column;gap: 3px;}
    .name .ru{font-weight: 900;font-size: 16px;line-height: 1.15;}
    .name .lat{color: var(--muted);font-size: 12px;}
    .mini{color: var(--muted);font-size: 13px;line-height: 1.35;flex: 1;}
    .actions{display:flex;gap: 8px;margin-top: 4px;}
    .btn{
      flex:1;border-radius: 12px;border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 10px 10px;
      font-size: 13px;
      cursor:pointer; user-select:none;
      text-align:center;
    }
    .btn.primary{background: rgba(77,163,255,.20);border-color: rgba(77,163,255,.35);font-weight:800;}
    .btn:active{transform: translateY(1px)}
    .btn.wb{background: rgba(255,255,255,.06);}

    /* Modal */
    .modal-backdrop{
      position: fixed; inset: 0;
      background: rgba(0,0,0,.58);
      display:none;
      align-items:flex-end;
      justify-content:center;
      padding: 14px;
      z-index: 50;
    }
    .modal{
      width: min(1040px, 100%);
      max-height: 88vh;
      overflow:auto;
      border-radius: 20px;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(18,22,28,.98), rgba(12,14,17,.98));
      box-shadow: 0 20px 60px rgba(0,0,0,.55);
    }
    .modal-head{
      padding: 14px 14px 10px;
      border-bottom: 1px solid var(--border);
      display:flex; gap: 10px;
      align-items:flex-start; justify-content:space-between;
    }
    .modal-title{display:flex;flex-direction:column;gap: 2px;}
    .modal-title .h{font-weight: 950;font-size: 16px;}
    .modal-title .sub{color: var(--muted);font-size: 12px;}
    .close{border: 1px solid var(--border);background: rgba(255,255,255,.05);color: var(--text);border-radius: 12px;padding: 10px 12px;cursor:pointer;}
    .modal-body{
      padding: 14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 760px){.modal-body{grid-template-columns: 1fr;}}
    .block{border: 1px solid var(--border);background: rgba(255,255,255,.04);border-radius: 16px;padding: 12px;}
    .block h3{margin: 0 0 8px;font-size: 14px;letter-spacing:.2px;}
    .block p, .block li{margin: 0;color: var(--muted);font-size: 13px;line-height: 1.45;}
    .block ul{margin: 0;padding-left: 18px;display:flex;flex-direction:column;gap: 6px;}
    .note{margin-top: 10px;color: var(--muted);font-size: 12px;line-height: 1.4;}
    .modal-foot{
      padding: 12px 14px 14px;
      border-top: 1px solid var(--border);
      display:flex; gap: 10px;
      align-items:center; justify-content:space-between;
      flex-wrap: wrap;
    }
    .support{display:flex;gap:10px;align-items:center;color: var(--muted);font-size: 12px;}
    .support a{color: var(--accent);text-decoration:none;font-weight: 800;}

    /* Drawer */
    .drawer{position: fixed; inset: 0; display:none; justify-content:flex-end; z-index: 60;}
    .drawer .shade{flex:1;background: rgba(0,0,0,.58);}
    .drawer .panel{
      width: min(440px, 92vw);
      height: 100%;
      background: linear-gradient(180deg, rgba(18,22,28,.98), rgba(12,14,17,.98));
      border-left: 1px solid var(--border);
      box-shadow: -20px 0 60px rgba(0,0,0,.55);
      display:flex; flex-direction:column;
    }
    .panel-head{padding: 14px;border-bottom: 1px solid var(--border);display:flex;justify-content:space-between;align-items:center;gap: 10px;}
    .panel-head .h{font-weight: 950;font-size: 16px;}
    .panel-body{padding: 14px;overflow:auto;flex:1;display:flex;flex-direction:column;gap: 10px;}
    .item{border: 1px solid var(--border);background: rgba(255,255,255,.04);border-radius: 16px;padding: 12px;display:flex;align-items:flex-start;justify-content:space-between;gap: 10px;}
    .item .left{display:flex;flex-direction:column;gap: 4px;}
    .item .n{font-weight: 900;font-size: 14px;}
    .item .d{color: var(--muted);font-size: 12px;line-height: 1.35;}
    .qty{display:flex;align-items:center;gap: 8px;}
    .qbtn{width: 34px;height: 34px;border-radius: 10px;border: 1px solid var(--border);background: rgba(255,255,255,.06);color: var(--text);cursor:pointer;font-weight: 950;}
    .qval{min-width: 18px;text-align:center;font-weight: 900;}
    .panel-foot{padding: 14px;border-top: 1px solid var(--border);display:flex;flex-direction:column;gap: 10px;}
    .total{display:flex;align-items:center;justify-content:space-between;color: var(--muted);font-size: 13px;}
    .total b{color: var(--text)}
    .buyrow{display:flex;gap: 10px;}
    .buyrow .btn{flex:1}
    .small{color: var(--muted);font-size: 12px;line-height: 1.35;}
  </style>
</head>

<body>
  <header>
    <div class="topbar">
      <div class="brand">
        <div class="t">–ì–†–û–†–•–ò–î ‚Äî Mini App</div>
        <div class="s">–ö–∞—Ç–∞–ª–æ–≥ —Ä–∞—Å—Ç–µ–Ω–∏–π ‚Ä¢ –ø–æ–¥–±–æ—Ä –≥—Ä—É–Ω—Ç–∞ ‚Ä¢ –∫–æ—Ä–∑–∏–Ω–∞</div>
      </div>

      <div class="controls">
        <div class="search">
          <span style="opacity:.75">üîé</span>
          <input id="q" type="text" placeholder="–ü–æ–∏—Å–∫: —Ä–∞—Å—Ç–µ–Ω–∏–µ –∏–ª–∏ –≥—Ä—É–Ω—Ç (–æ—Ä—Ö–∏–¥–µ—è, 5–ª, —Ñ–∏–∫—É—Å...)" />
        </div>

        <div id="cartBtn" class="pill" title="–û—Ç–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É —Ç–æ–≤–∞—Ä–æ–≤">
          –ö–æ—Ä–∑–∏–Ω–∞ <span id="cartCount" class="badge">0</span>
        </div>
      </div>
    </div>
  </header>

  <div class="wrap">
    <div class="tabs">
      <div id="tabPlants" class="tab active">–†–∞—Å—Ç–µ–Ω–∏—è</div>
      <div id="tabProducts" class="tab">–ì—Ä—É–Ω—Ç—ã (WB)</div>
    </div>

    <div class="section-title">
      <h2 id="title">–†–∞—Å—Ç–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
      <p id="hint" class="hint">
        –û—Ç–∫—Ä—ã–≤–∞–π –∫–∞—Ä—Ç–æ—á–∫—É —Ä–∞—Å—Ç–µ–Ω–∏—è ‚Äî –≤–Ω—É—Ç—Ä–∏ —É—Ö–æ–¥, –ø–µ—Ä–µ—Å–∞–¥–∫–∞, –≤–∏–¥–µ–æ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≥—Ä—É–Ω—Ç.
      </p>
    </div>

    <div id="grid" class="grid"></div>

    <p class="note">
      –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ –Ω–∞—à–ª–∏ ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É:
      <a href="https://t.me/melnikovnikitaa" target="_blank" rel="noreferrer">@melnikovnikitaa</a>.
    </p>
  </div>

  <!-- Details Modal (plant) -->
  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="mTitle">
      <div class="modal-head">
        <div class="modal-title">
          <div id="mTitle" class="h">‚Äî</div>
          <div id="mSub" class="sub">‚Äî</div>
        </div>
        <button id="mClose" class="close">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>

      <div class="modal-body">
        <div class="block">
          <h3>–ö–∞–∫ —Ä–∞—Å—Ç—ë—Ç –≤ –ø—Ä–∏—Ä–æ–¥–µ</h3>
          <p id="mWild">‚Äî</p>
        </div>

        <div class="block">
          <h3>–°–≤–µ—Ç / —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ / –≤–ª–∞–∂–Ω–æ—Å—Ç—å</h3>
          <ul id="mEnv"></ul>
        </div>

        <div class="block">
          <h3>–ü—Ä–∞–≤–∏–ª–∞ –ø–æ–ª–∏–≤–∞</h3>
          <ul id="mWater"></ul>
        </div>

        <div class="block">
          <h3>–ü–µ—Ä–µ—Å–∞–¥–∫–∞</h3>
          <ul id="mRepot"></ul>
          <p class="note" id="mRepotNote"></p>
        </div>

        <div class="block">
          <h3>–ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º</h3>
          <ul id="mProblems"></ul>
        </div>

        <div class="block">
          <h3>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≥—Ä—É–Ω—Ç –ì–†–û–†–•–ò–î</h3>
          <div id="mProductChips" class="chips" style="margin-bottom:10px;"></div>
          <p class="small" id="mVideoText"></p>
          <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">
            <button id="mVideoBtn" class="btn primary">–û—Ç–∫—Ä—ã—Ç—å –≤–∏–¥–µ–æ</button>
            <button id="mAddProductBtn" class="btn">–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–Ω—Ç –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
            <button id="mOpenWB" class="btn wb">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ WB</button>
          </div>
        </div>
      </div>

      <div class="modal-foot">
        <div class="support">
          –ü–æ–¥–¥–µ—Ä–∂–∫–∞: <a href="https://t.me/melnikovnikitaa" target="_blank" rel="noreferrer">@melnikovnikitaa</a>
          <span style="opacity:.65">‚Ä¢</span>
          –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ, –∏ –º—ã –¥–æ–±–∞–≤–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∫–∞—Ç–∞–ª–æ–≥.
        </div>
      </div>
    </div>
  </div>

  <!-- Cart Drawer (products) -->
  <div id="drawer" class="drawer" aria-hidden="true">
    <div id="drawerShade" class="shade"></div>
    <div class="panel">
      <div class="panel-head">
        <div class="h">–ö–æ—Ä–∑–∏–Ω–∞ (–≥—Ä—É–Ω—Ç—ã WB)</div>
        <button id="drawerClose" class="close">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>

      <div id="cartItems" class="panel-body"></div>

      <div class="panel-foot">
        <div class="total">
          <span>–ü–æ–∑–∏—Ü–∏–π:</span> <b id="totalItems">0</b>
        </div>
        <div class="buyrow">
          <button id="clearCart" class="btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
          <button id="checkoutWB" class="btn primary">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ WB</button>
        </div>
        <button id="checkoutSupport" class="btn">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å / –ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>

        <div class="small">
          ¬´–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ WB¬ª –æ—Ç–∫—Ä–æ–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã.
          ¬´–ü–æ–¥–¥–µ—Ä–∂–∫–∞¬ª ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç —á–∞—Ç <b>@melnikovnikitaa</b> —Å –≤–∞—à–∏–º —Å–ø–∏—Å–∫–æ–º.
        </div>
      </div>
    </div>
  </div>

  <script>
    const SUPPORT_USERNAME = "melnikovnikitaa";

    // --- PRODUCTS (WB links from you) ---
    const products = [
      { id:"p_spath_5l", name:"–ì—Ä—É–Ω—Ç –¥–ª—è —Å–ø–∞—Ç–∏—Ñ–∏–ª–ª—É–º–∞ 5–ª", volume:"5–ª", plant:"–°–ø–∞—Ç–∏—Ñ–∏–ª–ª—É–º", wb:"https://www.wildberries.ru/catalog/450413475/detail.aspx?targetUrl=GP" },
      { id:"p_zami_5l", name:"–ì—Ä—É–Ω—Ç –¥–ª—è –∑–∞–º–∏–æ–∫—É–ª—å–∫–∞—Å–∞ 5–ª", volume:"5–ª", plant:"–ó–∞–º–∏–æ–∫—É–ª—å–∫–∞—Å", wb:"https://www.wildberries.ru/catalog/327492373/detail.aspx?targetUrl=GP" },
      { id:"p_monst_5l", name:"–ì—Ä—É–Ω—Ç –¥–ª—è –º–æ–Ω—Å—Ç–µ—Ä—ã 5–ª", volume:"5–ª", plant:"–ú–æ–Ω—Å—Ç–µ—Ä–∞", wb:"https://www.wildberries.ru/catalog/434106528/detail.aspx?targetUrl=GP" },
      { id:"p_ficus_5l", name:"–ì—Ä—É–Ω—Ç –¥–ª—è —Ñ–∏–∫—É—Å–∞ –∏ –ø–∞–ª—å–º 5–ª", volume:"5–ª", plant:"–§–∏–∫—É—Å/–ü–∞–ª—å–º—ã", wb:"https://www.wildberries.ru/catalog/447870726/detail.aspx?targetUrl=GP" },
      { id:"p_orch_2l", name:"–ì—Ä—É–Ω—Ç –¥–ª—è –æ—Ä—Ö–∏–¥–µ–π 2–ª", volume:"2–ª", plant:"–û—Ä—Ö–∏–¥–µ—è", wb:"https://www.wildberries.ru/catalog/230055721/detail.aspx?targetUrl=GP" },
      { id:"p_orch_5l", name:"–ì—Ä—É–Ω—Ç –¥–ª—è –æ—Ä—Ö–∏–¥–µ–π 5–ª", volume:"5–ª", plant:"–û—Ä—Ö–∏–¥–µ—è", wb:"https://www.wildberries.ru/catalog/340068487/detail.aspx?targetUrl=GP" },
    ];

    // --- PLANTS (3 now, extend to 10 later) ---
    const plants = [
      {
        id: "spathiphyllum",
        ru: "–°–ø–∞—Ç–∏—Ñ–∏–ª–ª—É–º",
        lat: "Spathiphyllum",
        tag: "–í–ª–∞–∂–Ω—ã–µ —Ç—Ä–æ–ø–∏–∫–∏",
        short: "–õ—é–±–∏—Ç —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—É—é –≤–ª–∞–∂–Ω–æ—Å—Ç—å –±–µ–∑ ¬´–±–æ–ª–æ—Ç–∞¬ª. –•–æ—Ä–æ—à–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Ç—ë–ø–ª—ã–π –¥—É—à –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —É—Ö–æ–¥.",
        wild: "–°–ø–∞—Ç–∏—Ñ–∏–ª–ª—É–º ‚Äî —Ç—Ä–æ–ø–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –ø–æ–¥ –ø–æ–ª–æ–≥–æ–º –ª–µ—Å–∞: —Ä–∞—Å—Å–µ—è–Ω–Ω—ã–π —Å–≤–µ—Ç, —Ç—ë–ø–ª—ã–π –≤–æ–∑–¥—É—Ö, –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤–ª–∞–∂–Ω—ã–π, –Ω–æ —Ä—ã—Ö–ª—ã–π —Å—É–±—Å—Ç—Ä–∞—Ç. –í –ø—Ä–∏—Ä–æ–¥–µ –∫–æ—Ä–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç –∫–∏—Å–ª–æ—Ä–æ–¥ –¥–∞–∂–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ ‚Äî –ø–æ—ç—Ç–æ–º—É –¥–æ–º–∞ –≤–∞–∂–Ω–æ –Ω–µ –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –≥—Ä—É–Ω—Ç –≤ –ø–ª–æ—Ç–Ω—É—é ¬´–∫–∞—à—É¬ª.",
        env: [
          "–°–≤–µ—Ç: —è—Ä–∫–∏–π —Ä–∞—Å—Å–µ—è–Ω–Ω—ã–π, –±–µ–∑ –ø—Ä—è–º–æ–≥–æ —Å–æ–ª–Ω—Ü–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ –ª–µ—Ç–æ–º).",
          "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 18‚Äì27¬∞C, –±–µ–∑ —Ä–µ–∑–∫–∏—Ö —Å–∫–≤–æ–∑–Ω—è–∫–æ–≤.",
          "–í–ª–∞–∂–Ω–æ—Å—Ç—å: —Å—Ä–µ–¥–Ω—è—è/–≤—ã—Å–æ–∫–∞—è; –ø–æ–ª–µ–∑–Ω—ã –æ–ø—Ä—ã—Å–∫–∏–≤–∞–Ω–∏—è –∏ –¥—É—à (—Ç—ë–ø–ª–æ–π –≤–æ–¥–æ–π)."
        ],
        water: [
          "–ü–æ–ª–∏–≤–∞–π, –∫–æ–≥–¥–∞ –ø–æ–¥—Å–æ—Ö–Ω—É—Ç –≤–µ—Ä—Ö–Ω–∏–µ 2‚Äì3 —Å–º —Å—É–±—Å—Ç—Ä–∞—Ç–∞.",
          "–õ–µ–π –¥–æ –≤—ã—Ö–æ–¥–∞ –≤–æ–¥—ã –≤ –ø–æ–¥–¥–æ–Ω, –∑–∞—Ç–µ–º –ª–∏—à–Ω–µ–µ —Å–ª–∏–≤–∞–π —á–µ—Ä–µ–∑ 10‚Äì15 –º–∏–Ω—É—Ç.",
          "–ó–∏–º–æ–π –ø–æ–ª–∏–≤ —Ä–µ–∂–µ (—Ö–æ–ª–æ–¥–Ω—ã–π –ø–æ–¥–æ–∫–æ–Ω–Ω–∏–∫ = —Ä–∏—Å–∫ –ø–µ—Ä–µ–ª–∏–≤–∞).",
          "–û—Ä–∏–µ–Ω—Ç–∏—Ä: –ª–∏—Å—Ç—å—è —Ç–µ—Ä—è—é—Ç —Ç—É—Ä–≥–æ—Ä/—Å–ª–µ–≥–∫–∞ ¬´–ø–æ–Ω–∏–∫–∞—é—Ç¬ª ‚Äî –æ–±—ã—á–Ω–æ –ø—Ä–æ—Å–∏—Ç –≤–æ–¥—É."
        ],
        repot: [
          "–ü–ª–∞–Ω–æ–≤–æ: —Ä–∞–∑ –≤ 12‚Äì18 –º–µ—Å—è—Ü–µ–≤ (–µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å—Ç—ë—Ç).",
          "–°—Ä–æ—á–Ω–æ: –ø—Ä–∏ –∑–∞–∫–∏—Å–∞–Ω–∏–∏ –≥—Ä—É–Ω—Ç–∞, –∑–∞–ø–∞—Ö–µ —Å—ã—Ä–æ—Å—Ç–∏, –ø–ª–µ—Å–µ–Ω–∏, –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∫–æ—Ä–Ω—è–º–∏.",
          "–ì–æ—Ä—à–æ–∫: +2‚Äì3 —Å–º –∫ –¥–∏–∞–º–µ—Ç—Ä—É, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥—Ä–µ–Ω–∞–∂–Ω—ã–µ –æ—Ç–≤–µ—Ä—Å—Ç–∏—è.",
          "–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å–∞–¥–∫–∏: 5‚Äì7 –¥–Ω–µ–π –±–µ–∑ ¬´–∑–∞–ª–∏–≤–æ–≤¬ª, —Ç–æ–ª—å–∫–æ —É–º–µ—Ä–µ–Ω–Ω–æ."
        ],
        repotNote: "–ö–ª—é—á: —Ä—ã—Ö–ª—ã–π, –≤–æ–∑–¥—É—Ö–æ–ø—Ä–æ–Ω–∏—Ü–∞–µ–º—ã–π —Å—É–±—Å—Ç—Ä–∞—Ç. –ü–ª–æ—Ç–Ω—ã–π –≥—Ä—É–Ω—Ç = —Ä–∏—Å–∫ –≥–Ω–∏–ª–µ–π.",
        problems: [
          "–ñ—ë–ª—Ç—ã–µ –ª–∏—Å—Ç—å—è + –º–æ–∫—Ä—ã–π –∫–æ–º: –ø–µ—Ä–µ–ª–∏–≤/–ø–ª–æ—Ö–æ–π –¥—Ä–µ–Ω–∞–∂.",
          "–°—É—Ö–∏–µ –∫–æ—Ä–∏—á–Ω–µ–≤—ã–µ –∫–æ–Ω—á–∏–∫–∏: —Å—É—Ö–æ–π –≤–æ–∑–¥—É—Ö/–Ω–µ—Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –ø–æ–ª–∏–≤/–∂—ë—Å—Ç–∫–∞—è –≤–æ–¥–∞.",
          "–í—è–ª–æ—Å—Ç—å –ø—Ä–∏ –≤–ª–∞–∂–Ω–æ–º –≥—Ä—É–Ω—Ç–µ: –∫–æ—Ä–Ω–∏ —Å—Ç—Ä–∞–¥–∞—é—Ç –æ—Ç –Ω–µ—Ö–≤–∞—Ç–∫–∏ –∫–∏—Å–ª–æ—Ä–æ–¥–∞."
        ],
        videoText: "–í–∏–¥–µ–æ: –ø–µ—Ä–µ—Å–∞–¥–∫–∞ —Å–ø–∞—Ç–∏—Ñ–∏–ª–ª—É–º–∞ (–ø–æ–¥–±–æ—Ä–∫–∞).",
        videoUrl: "https://www.youtube.com/results?search_query=%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D0%B0%D0%B4%D0%BA%D0%B0+%D1%81%D0%BF%D0%B0%D1%82%D0%B8%D1%84%D0%B8%D0%BB%D0%BB%D1%83%D0%BC%D0%B0",
        productIds: ["p_spath_5l"]
      },
      {
        id: "zamioculcas",
        ru: "–ó–∞–º–∏–æ–∫—É–ª—å–∫–∞—Å",
        lat: "Zamioculcas zamiifolia",
        tag: "–ó–∞—Å—É—Ö–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π",
        short: "–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –ª—É—á—à–µ –Ω–µ–¥–æ–ª–∏—Ç—å, —á–µ–º –ø–µ—Ä–µ–ª–∏—Ç—å. –†–µ–¥–∫–∏–π –ø–æ–ª–∏–≤ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Å—ã—Ö–∞–Ω–∏—è.",
        wild: "–í –ø—Ä–∏—Ä–æ–¥–µ –∑–∞–º–∏–æ–∫—É–ª—å–∫–∞—Å –ø—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω –∫ –±–æ–ª–µ–µ –∑–∞—Å—É—à–ª–∏–≤—ã–º —É—Å–ª–æ–≤–∏—è–º –∏ –∑–∞–ø–∞—Å–∞–µ—Ç –≤–ª–∞–≥—É –≤ –∫–ª—É–±–Ω—è—Ö. –ü–æ—ç—Ç–æ–º—É –¥–æ–º–∞ –æ–Ω —Ç–µ—Ä–ø–∏—Ç –ø—Ä–æ–ø—É—Å–∫–∏ –ø–æ–ª–∏–≤–∞, –Ω–æ –ø–ª–æ—Ö–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –ø–µ—Ä–µ—É–≤–ª–∞–∂–Ω–µ–Ω–∏–µ –∏ –ø–ª–æ—Ç–Ω—ã–π —Å—É–±—Å—Ç—Ä–∞—Ç –±–µ–∑ –≤–æ–∑–¥—É—Ö–∞.",
        env: [
          "–°–≤–µ—Ç: –æ—Ç —è—Ä–∫–æ–≥–æ —Ä–∞—Å—Å–µ—è–Ω–Ω–æ–≥–æ –¥–æ —Å–æ–ª–Ω—Ü–∞ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ).",
          "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 18‚Äì30¬∞C, –Ω–µ –ª—é–±–∏—Ç —Ö–æ–ª–æ–¥ –Ω–∏–∂–µ 15¬∞C.",
          "–í–ª–∞–∂–Ω–æ—Å—Ç—å: –æ–±—ã—á–Ω–∞—è –∫–æ–º–Ω–∞—Ç–Ω–∞—è; –æ–ø—Ä—ã—Å–∫–∏–≤–∞–Ω–∏—è –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã."
        ],
        water: [
          "–ü–æ–ª–∏–≤–∞–π —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Å—ã—Ö–∞–Ω–∏—è –∫–æ–º–∞ (–ø—Ä–æ–≤–µ—Ä—è–π –≥–ª—É–±–æ–∫–æ).",
          "–õ–µ–π —É–º–µ—Ä–µ–Ω–Ω–æ, –∏–∑–±—ã—Ç–æ–∫ –≤–æ–¥—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–ª–∏–≤–∞–π.",
          "–ó–∏–º–æ–π –ø–æ–ª–∏–≤ —Å–∏–ª—å–Ω–æ —Ä–µ–∂–µ (–∏–Ω–æ–≥–¥–∞ 1 —Ä–∞–∑ –≤ 3‚Äì4 –Ω–µ–¥–µ–ª–∏).",
          "–ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è ‚Äî –ø–æ–¥–æ–∂–¥–∏ 2‚Äì3 –¥–Ω—è –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –ø–æ–ª–µ–π."
        ],
        repot: [
          "–ü–ª–∞–Ω–æ–≤–æ: —Ä–∞–∑ –≤ 2‚Äì3 –≥–æ–¥–∞ (—Ä–∞—Å—Ç—ë—Ç –º–µ–¥–ª–µ–Ω–Ω–æ).",
          "–°—Ä–æ—á–Ω–æ: –µ—Å–ª–∏ –≥–æ—Ä—à–æ–∫ ¬´—Ä–∞—Å–ø–∏—Ä–∞–µ—Ç¬ª –∫–ª—É–±–Ω—è–º–∏ –∏–ª–∏ –≥—Ä—É–Ω—Ç —Å—Ç–∞–ª —Ç—è–∂—ë–ª—ã–º –∏ –ø–∞—Ö–Ω–µ—Ç —Å—ã—Ä–æ—Å—Ç—å—é.",
          "–ì–æ—Ä—à–æ–∫: —É—Å—Ç–æ–π—á–∏–≤—ã–π, —Å –æ—Ç–≤–µ—Ä—Å—Ç–∏—è–º–∏; —Ä–∞–∑–º–µ—Ä —É–º–µ—Ä–µ–Ω–Ω—ã–π (–Ω–µ ¬´–≤–µ–¥—Ä–æ¬ª).",
          "–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å–∞–¥–∫–∏: 7‚Äì10 –¥–Ω–µ–π –±–µ–∑ –ø–æ–ª–∏–≤–∞ (–¥–∞—ë–º —Ä–∞–Ω–∫–∞–º –ø–æ–¥—Å–æ—Ö–Ω—É—Ç—å)."
        ],
        repotNote: "–ö–ª—é—á: –æ—á–µ–Ω—å —Ä—ã—Ö–ª–∞—è —Å–º–µ—Å—å –∏ –¥—Ä–µ–Ω–∞–∂. –ü–µ—Ä–µ–ª–∏–≤ = –æ—Å–Ω–æ–≤–Ω–æ–π –≤—Ä–∞–≥ –∑–∞–º–∏–æ–∫—É–ª—å–∫–∞—Å–∞.",
        problems: [
          "–ñ—ë–ª—Ç–µ—é—Ç —Å—Ç–µ–±–ª–∏/–º—è–≥–∫–∏–µ –æ—Å–Ω–æ–≤–∞–Ω–∏—è: –ø–µ—Ä–µ–ª–∏–≤ –∏ –≥–Ω–∏–ª—å.",
          "–õ–∏—Å—Ç—å—è –º–æ—Ä—â–∞—Ç—Å—è: –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ—Ä–Ω—è–º–∏ –∏–ª–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ—Å—É—à–∫–∞.",
          "–ù–µ —Ä–∞—Å—Ç—ë—Ç: –º–∞–ª–æ —Å–≤–µ—Ç–∞ –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –≥–æ—Ä—à–æ–∫."
        ],
        videoText: "–í–∏–¥–µ–æ: –ø–µ—Ä–µ—Å–∞–¥–∫–∞ –∑–∞–º–∏–æ–∫—É–ª—å–∫–∞—Å–∞ (–ø–æ–¥–±–æ—Ä–∫–∞).",
        videoUrl: "https://www.youtube.com/results?search_query=%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D0%B0%D0%B4%D0%BA%D0%B0+%D0%B7%D0%B0%D0%BC%D0%B8%D0%BE%D0%BA%D1%83%D0%BB%D1%8C%D0%BA%D0%B0%D1%81%D0%B0",
        productIds: ["p_zami_5l"]
      },
      {
        id: "phalaenopsis",
        ru: "–û—Ä—Ö–∏–¥–µ—è —Ñ–∞–ª–µ–Ω–æ–ø—Å–∏—Å",
        lat: "Phalaenopsis",
        tag: "–≠–ø–∏—Ñ–∏—Ç",
        short: "–ñ–∏–≤—ë—Ç –Ω–∞ –¥–µ—Ä–µ–≤—å—è—Ö, –∞ –Ω–µ –≤ –∑–µ–º–ª–µ. –ù—É–∂–Ω–∞ –∫–æ—Ä–∞, –≤–æ–∑–¥—É—Ö –∫–æ—Ä–Ω—è–º –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–ª–∏–≤.",
        wild: "–§–∞–ª–µ–Ω–æ–ø—Å–∏—Å ‚Äî —ç–ø–∏—Ñ–∏—Ç: –≤ –ø—Ä–∏—Ä–æ–¥–µ —Ä–∞—Å—Ç—ë—Ç –Ω–∞ –∫–æ—Ä–µ –¥–µ—Ä–µ–≤—å–µ–≤. –ö–æ—Ä–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç –º–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ –∏ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ—Å—ã—Ö–∞—é—Ç –ø–æ—Å–ª–µ –¥–æ–∂–¥–µ–π. –ü–æ—ç—Ç–æ–º—É –¥–æ–º–∞ –Ω–µ–ª—å–∑—è —Å–∞–∂–∞—Ç—å —Ñ–∞–ª–µ–Ω–æ–ø—Å–∏—Å –≤ ¬´–∑–µ–º–ª—é¬ª ‚Äî –Ω—É–∂–µ–Ω —Å—É–±—Å—Ç—Ä–∞—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ—Ä—ã –∏ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è.",
        env: [
          "–°–≤–µ—Ç: —è—Ä–∫–∏–π —Ä–∞—Å—Å–µ—è–Ω–Ω—ã–π; –≤–æ—Å—Ç–æ–∫/–∑–∞–ø–∞–¥ –∏–¥–µ–∞–ª—å–Ω—ã, —é–≥ —Ç–æ–ª—å–∫–æ —Å –ø—Ä–∏—Ç–µ–Ω–µ–Ω–∏–µ–º.",
          "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 18‚Äì28¬∞C; –ø–µ—Ä–µ–ø–∞–¥—ã –¥–µ–Ω—å/–Ω–æ—á—å —Å—Ç–∏–º—É–ª–∏—Ä—É—é—Ç —Ü–≤–µ—Ç–µ–Ω–∏–µ.",
          "–í–ª–∞–∂–Ω–æ—Å—Ç—å: 40‚Äì70%; –≤–∞–∂–Ω–∞ —Ü–∏—Ä–∫—É–ª—è—Ü–∏—è –≤–æ–∑–¥—É—Ö–∞ (–±–µ–∑ —Å–∫–≤–æ–∑–Ω—è–∫–æ–≤)."
        ],
        water: [
          "–ü–æ–ª–∏–≤ –ø–æ –∫–æ—Ä–Ω—è–º: —Å–µ—Ä–µ–±—Ä–∏—Å—Ç—ã–µ/—Å–µ—Ä—ã–µ = –ø–æ—Ä–∞ –ø–æ–ª–∏–≤–∞—Ç—å, –∑–µ–ª—ë–Ω—ã–µ = —Ä–∞–Ω–æ.",
          "–ú–µ—Ç–æ–¥: –ø—Ä–æ–ª–∏–≤ –∏–ª–∏ –∑–∞–º–∞—á–∏–≤–∞–Ω–∏–µ 10‚Äì15 –º–∏–Ω—É—Ç, –∑–∞—Ç–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–ª–∏—Ç—å.",
          "–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Å—Ç–∞–≤–ª—è–π –≤–æ–¥—É –≤ —Ç–æ—á–∫–µ —Ä–æ—Å—Ç–∞ (–≤ —Ü–µ–Ω—Ç—Ä–µ —Ä–æ–∑–µ—Ç–∫–∏).",
          "–ß–∞—Å—Ç–æ—Ç–∞: –æ–±—ã—á–Ω–æ 1 —Ä–∞–∑ –≤ 7‚Äì10 –¥–Ω–µ–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Å–ª–æ–≤–∏–π)."
        ],
        repot: [
          "–ü–ª–∞–Ω–æ–≤–æ: —Ä–∞–∑ –≤ 1,5‚Äì2 –≥–æ–¥–∞ (–∫–æ—Ä–∞ —Ä–∞–∑–ª–∞–≥–∞–µ—Ç—Å—è).",
          "–°—Ä–æ—á–Ω–æ: –µ—Å–ª–∏ –∫–æ—Ä–∞ —Å—Ç–∞–ª–∞ —Ç—Ä—É—Ö–æ–π, –∑–∞–ø–∞—Ö, –ø–ª–µ—Å–µ–Ω—å, –∫–æ—Ä–Ω–∏ –≥–Ω–∏—é—Ç.",
          "–ü–µ—Ä–µ—Å–∞–¥–∫–∞: —É–¥–∞–ª–∏—Ç—å –≥–Ω–∏–ª—ã–µ –∫–æ—Ä–Ω–∏, –ø–æ–¥—Å—É—à–∏—Ç—å —Å—Ä–µ–∑—ã, –ø–æ—Å–∞–¥–∏—Ç—å –≤ —Å–≤–µ–∂—É—é –∫–æ—Ä—É.",
          "–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å–∞–¥–∫–∏: 3‚Äì5 –¥–Ω–µ–π –Ω–µ –ø–æ–ª–∏–≤–∞—Ç—å (–µ—Å–ª–∏ –±—ã–ª–∏ —Å—Ä–µ–∑—ã)."
        ],
        repotNote: "–ö–ª—é—á: –≤–æ–∑–¥—É—Ö –∫–æ—Ä–Ω—è–º –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ—Ä–∞. ¬´–ó–µ–º–ª—è¬ª –¥–ª—è –æ—Ä—Ö–∏–¥–µ–π –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—Ä–æ–±–ª–µ–º–∞–º.",
        problems: [
          "–ú—è–≥–∫–∏–µ –∫–æ—Ä–Ω–∏/–∑–∞–ø–∞—Ö: –ø–µ—Ä–µ–ª–∏–≤, –ø–ª–æ—Ö–∞—è –∫–æ—Ä–∞, –º–∞–ª–æ –≤–æ–∑–¥—É—Ö–∞.",
          "–°–º–æ—Ä—â–µ–Ω–Ω—ã–µ –ª–∏—Å—Ç—å—è: –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ—Ä–Ω—è–º–∏ –∏–ª–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ—Å—É—à–∫–∞.",
          "–ü—è—Ç–Ω–∞: –≤–æ–∑–º–æ–∂–µ–Ω –æ–∂–æ–≥ —Å–æ–ª–Ω—Ü–µ–º –∏–ª–∏ –≥—Ä–∏–±–æ–∫ ‚Äî –≤–∞–∂–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞."
        ],
        videoText: "–í–∏–¥–µ–æ: –ø–µ—Ä–µ—Å–∞–¥–∫–∞ —Ñ–∞–ª–µ–Ω–æ–ø—Å–∏—Å–∞ (–ø–æ–¥–±–æ—Ä–∫–∞).",
        videoUrl: "https://www.youtube.com/results?search_query=%D0%BF%D0%B5%D1%80%D0%B5%D1%81%D0%B0%D0%B4%D0%BA%D0%B0+%D1%84%D0%B0%D0%BB%D0%B5%D0%BD%D0%BE%D0%BF%D1%81%D0%B8%D1%81%D0%B0",
        productIds: ["p_orch_2l","p_orch_5l"]
      }
    ];

    // Telegram UI
    try {
      const tg = window.Telegram?.WebApp;
      if (tg) { tg.ready(); tg.expand(); }
    } catch(_) {}

    // Tabs & search
    let mode = "plants"; // plants | products
    const tabPlants = document.getElementById("tabPlants");
    const tabProducts = document.getElementById("tabProducts");
    const title = document.getElementById("title");
    const hint = document.getElementById("hint");
    const grid = document.getElementById("grid");
    const q = document.getElementById("q");

    tabPlants.onclick = () => setMode("plants");
    tabProducts.onclick = () => setMode("products");

    function setMode(m){
      mode = m;
      tabPlants.classList.toggle("active", mode==="plants");
      tabProducts.classList.toggle("active", mode==="products");
      if(mode==="plants"){
        title.textContent = "–†–∞—Å—Ç–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏";
        hint.textContent = "–û—Ç–∫—Ä—ã–≤–∞–π –∫–∞—Ä—Ç–æ—á–∫—É —Ä–∞—Å—Ç–µ–Ω–∏—è ‚Äî –≤–Ω—É—Ç—Ä–∏ —É—Ö–æ–¥, –ø–µ—Ä–µ—Å–∞–¥–∫–∞, –≤–∏–¥–µ–æ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≥—Ä—É–Ω—Ç.";
      } else {
        title.textContent = "–ì—Ä—É–Ω—Ç—ã –ì–†–û–†–•–ò–î –Ω–∞ Wildberries";
        hint.textContent = "–î–æ–±–∞–≤–ª—è–π –≥—Ä—É–Ω—Ç—ã –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –æ—Ç–∫—Ä—ã–≤–∞–π –Ω–∞ WB. –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –Ω–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–æ —Å–ø–∏—Å–∫–æ–º.";
      }
      renderGrid();
    }

    q.addEventListener("input", renderGrid);

    function renderGrid(){
      const query = (q.value || "").trim().toLowerCase();

      if(mode === "plants"){
        const items = plants.filter(p=>{
          if(!query) return true;
          return (p.ru + " " + p.lat + " " + p.tag).toLowerCase().includes(query);
        });

        grid.innerHTML = items.map(p => `
          <div class="card">
            <div class="thumb"><span class="tag">${esc(p.tag)}</span></div>
            <div class="content">
              <div class="name">
                <div class="ru">${esc(p.ru)}</div>
                <div class="lat">${esc(p.lat)}</div>
              </div>
              <div class="mini">${esc(p.short)}</div>
              <div class="actions">
                <button class="btn" onclick="openDetails('${p.id}')">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                <button class="btn primary" onclick="addRecommendedProduct('${p.id}')">–ì—Ä—É–Ω—Ç –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
              </div>
            </div>
          </div>
        `).join("") || emptyState();

      } else {
        const items = products.filter(x=>{
          if(!query) return true;
          return (x.name + " " + x.volume + " " + x.plant).toLowerCase().includes(query);
        });

        grid.innerHTML = items.map(pr => `
          <div class="card">
            <div class="thumb">
              <span class="tag">Wildberries</span>
              <span class="tag">${esc(pr.volume)}</span>
            </div>
            <div class="content">
              <div class="name">
                <div class="ru">${esc(pr.name)}</div>
                <div class="lat">–î–ª—è: ${esc(pr.plant)}</div>
              </div>
              <div class="mini">–î–æ–±–∞–≤—å –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –æ—Ç–∫—Ä–æ–π –Ω–∞ WB. –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –ø–æ–¥–±–æ—Ä–æ–º ‚Äî –Ω–∞–ø–∏—à–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.</div>
              <div class="actions">
                <button class="btn wb" onclick="openWB('${pr.wb}')">–û—Ç–∫—Ä—ã—Ç—å WB</button>
                <button class="btn primary" onclick="addProductToCart('${pr.id}')">–í –∫–æ—Ä–∑–∏–Ω—É</button>
              </div>
            </div>
          </div>
        `).join("") || emptyState();
      }
    }

    function emptyState(){
      return `<div class="block" style="grid-column:1/-1;">
        <h3>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
        <p>–ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –æ—á–∏—Å—Ç–∏ –ø–æ–∏—Å–∫.</p>
      </div>`;
    }

    // Modal (plant)
    const modalBackdrop = document.getElementById("modalBackdrop");
    const mTitle = document.getElementById("mTitle");
    const mSub = document.getElementById("mSub");
    const mWild = document.getElementById("mWild");
    const mEnv = document.getElementById("mEnv");
    const mWater = document.getElementById("mWater");
    const mRepot = document.getElementById("mRepot");
    const mRepotNote = document.getElementById("mRepotNote");
    const mProblems = document.getElementById("mProblems");
    const mVideoText = document.getElementById("mVideoText");
    const mVideoBtn = document.getElementById("mVideoBtn");
    const mAddProductBtn = document.getElementById("mAddProductBtn");
    const mOpenWB = document.getElementById("mOpenWB");
    const mProductChips = document.getElementById("mProductChips");
    const mClose = document.getElementById("mClose");

    let activePlantId = null;
    let activePrimaryProductId = null;

    window.openDetails = function(id){
      const p = plants.find(x=>x.id===id);
      if(!p) return;

      activePlantId = id;

      mTitle.textContent = p.ru;
      mSub.textContent = `${p.lat} ‚Ä¢ ${p.tag}`;
      mWild.textContent = p.wild;

      mEnv.innerHTML = p.env.map(x=>`<li>${esc(x)}</li>`).join("");
      mWater.innerHTML = p.water.map(x=>`<li>${esc(x)}</li>`).join("");
      mRepot.innerHTML = p.repot.map(x=>`<li>${esc(x)}</li>`).join("");
      mRepotNote.textContent = p.repotNote || "";
      mProblems.innerHTML = p.problems.map(x=>`<li>${esc(x)}</li>`).join("");

      mVideoText.textContent = p.videoText || "–í–∏–¥–µ–æ –ø–æ –ø–µ—Ä–µ—Å–∞–¥–∫–µ.";
      mVideoBtn.onclick = () => openLink(p.videoUrl);

      // recommended products
      const rec = (p.productIds || []).map(pid => products.find(pp=>pp.id===pid)).filter(Boolean);
      activePrimaryProductId = rec[0]?.id || null;

      mProductChips.innerHTML = rec.map((pp, idx)=>`
        <span class="chip" style="cursor:pointer" onclick="selectPrimaryProduct('${pp.id}')">
          ${esc(pp.volume)} ‚Ä¢ ${esc(pp.name.replace("–ì—Ä—É–Ω—Ç ",""))}
        </span>
      `).join("") || `<span class="chip">–ü–æ–∫–∞ –Ω–µ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–≥–æ –≥—Ä—É–Ω—Ç–∞</span>`;

      mAddProductBtn.onclick = () => {
        if(!activePrimaryProductId && rec[0]) activePrimaryProductId = rec[0].id;
        if(activePrimaryProductId) addProductToCart(activePrimaryProductId);
      };

      mOpenWB.onclick = () => {
        const pp = products.find(x=>x.id===activePrimaryProductId) || rec[0];
        if(pp?.wb) openWB(pp.wb);
      };

      modalBackdrop.style.display = "flex";
      modalBackdrop.setAttribute("aria-hidden", "false");
    }

    window.selectPrimaryProduct = function(pid){
      activePrimaryProductId = pid;
      try { window.Telegram?.WebApp?.HapticFeedback?.impactOccurred("light"); } catch(_) {}
    }

    function closeModal(){
      modalBackdrop.style.display = "none";
      modalBackdrop.setAttribute("aria-hidden", "true");
      activePlantId = null;
      activePrimaryProductId = null;
    }
    mClose.addEventListener("click", closeModal);
    modalBackdrop.addEventListener("click", (e)=>{ if(e.target === modalBackdrop) closeModal(); });

    // Links helpers
    function openLink(url){
      const tg = window.Telegram?.WebApp;
      if(tg && typeof tg.openLink === "function") tg.openLink(url);
      else window.open(url, "_blank");
    }
    function openWB(url){
      // WB –ª—É—á—à–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –∫–∞–∫ –≤–Ω–µ—à–Ω—é—é —Å—Å—ã–ª–∫—É
      const tg = window.Telegram?.WebApp;
      if(tg && typeof tg.openLink === "function") tg.openLink(url);
      else window.open(url, "_blank");
    }
    window.openWB = openWB;

    // Cart (PRODUCTS)
    const cart = new Map(); // productId -> qty
    const cartBtn = document.getElementById("cartBtn");
    const cartCount = document.getElementById("cartCount");
    const drawer = document.getElementById("drawer");
    const drawerShade = document.getElementById("drawerShade");
    const drawerClose = document.getElementById("drawerClose");
    const cartItems = document.getElementById("cartItems");
    const totalItems = document.getElementById("totalItems");
    const clearCart = document.getElementById("clearCart");
    const checkoutWB = document.getElementById("checkoutWB");
    const checkoutSupport = document.getElementById("checkoutSupport");

    cartBtn.addEventListener("click", openCart);
    drawerShade.addEventListener("click", closeCart);
    drawerClose.addEventListener("click", closeCart);

    clearCart.addEventListener("click", ()=>{
      cart.clear();
      renderCart();
      updateBadge();
    });

    checkoutWB.addEventListener("click", ()=>{
      if(cart.size === 0){ alert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞—è."); return; }
      // –æ—Ç–∫—Ä–æ–µ–º —Ç–æ–≤–∞—Ä—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏
      for(const [pid] of cart.entries()){
        const p = products.find(x=>x.id===pid);
        if(p?.wb) openWB(p.wb);
      }
    });

    checkoutSupport.addEventListener("click", ()=>{
      const text = buildSupportText();
      const url = `https://t.me/${SUPPORT_USERNAME}?text=${encodeURIComponent(text)}`;
      const tg = window.Telegram?.WebApp;
      if(tg && typeof tg.openTelegramLink === "function") tg.openTelegramLink(url);
      else if(tg && typeof tg.openLink === "function") tg.openLink(url);
      else window.open(url, "_blank");
    });

    window.addProductToCart = function(productId){
      const qty = cart.get(productId) || 0;
      cart.set(productId, qty + 1);
      updateBadge();
      try { window.Telegram?.WebApp?.HapticFeedback?.impactOccurred("light"); } catch(_) {}
    }

    window.addRecommendedProduct = function(plantId){
      const p = plants.find(x=>x.id===plantId);
      const pid = p?.productIds?.[0];
      if(!pid){ alert("–î–ª—è —ç—Ç–æ–≥–æ —Ä–∞—Å—Ç–µ–Ω–∏—è –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –≥—Ä—É–Ω—Ç."); return; }
      addProductToCart(pid);
    }

    function updateBadge(){
      let sum = 0;
      for(const v of cart.values()) sum += v;
      cartCount.textContent = String(sum);
      totalItems.textContent = String(sum);
    }

    function openCart(){
      renderCart();
      drawer.style.display = "flex";
      drawer.setAttribute("aria-hidden", "false");
    }
    function closeCart(){
      drawer.style.display = "none";
      drawer.setAttribute("aria-hidden", "true");
    }

    function renderCart(){
      if(cart.size === 0){
        cartItems.innerHTML = `
          <div class="block">
            <h3>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞—è</h3>
            <p>–î–æ–±–∞–≤—å –≥—Ä—É–Ω—Ç—ã –∏–∑ –≤–∫–ª–∞–¥–∫–∏ ¬´–ì—Ä—É–Ω—Ç—ã (WB)¬ª –∏–ª–∏ –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–∞—Å—Ç–µ–Ω–∏—è.</p>
          </div>
        `;
        updateBadge();
        return;
      }

      const rows = [];
      for(const [id, qty] of cart.entries()){
        const pr = products.find(x=>x.id===id);
        if(!pr) continue;
        rows.push({pr, qty});
      }

      cartItems.innerHTML = rows.map(({pr, qty}) => `
        <div class="item">
          <div class="left">
            <div class="n">${esc(pr.name)}</div>
            <div class="d">–î–ª—è: ${esc(pr.plant)} ‚Ä¢ ${esc(pr.volume)}</div>
            <div class="d"><a href="${esc(pr.wb)}" target="_blank" rel="noreferrer" style="color: var(--accent); text-decoration:none; font-weight:800;">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ WB</a></div>
          </div>

          <div class="qty">
            <button class="qbtn" onclick="decQty('${pr.id}')">‚àí</button>
            <div class="qval">${qty}</div>
            <button class="qbtn" onclick="incQty('${pr.id}')">+</button>
          </div>
        </div>
      `).join("");

      updateBadge();
    }

    window.incQty = function(id){
      cart.set(id, (cart.get(id)||0) + 1);
      renderCart();
    }
    window.decQty = function(id){
      const v = (cart.get(id)||0) - 1;
      if(v <= 0) cart.delete(id);
      else cart.set(id, v);
      renderCart();
    }

    function buildSupportText(){
      const lines = [];
      lines.push("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—á—É –ø–æ–¥–æ–±—Ä–∞—Ç—å/–∑–∞–∫–∞–∑–∞—Ç—å –≥—Ä—É–Ω—Ç –ì–†–û–†–•–ò–î. –í –∫–æ—Ä–∑–∏–Ω–µ:");
      if(cart.size === 0) {
        lines.push("‚Äî (–ø–æ–∫–∞ –ø—É—Å—Ç–æ)");
      } else {
        for(const [pid, qty] of cart.entries()){
          const pr = products.find(x=>x.id===pid);
          if(!pr) continue;
          lines.push(`‚Ä¢ ${pr.name} ‚Äî ${qty} —à—Ç. (${pr.wb})`);
        }
      }
      lines.push("");
      lines.push("–ù—É–∂–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ —É—Ö–æ–¥—É/–ø–µ—Ä–µ—Å–∞–¥–∫–µ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞.");
      return lines.join("\n");
    }

    function esc(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // init
    setMode("plants");
    updateBadge();
  </script>
</body>
</html>

